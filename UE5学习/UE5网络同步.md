# UE5网络同步

### 网络概述

UE5采用C/S架构，对于**单人游戏**或**本地多人游戏**，玩家输入到游戏不存在隐患

对于联网多人游戏，所有客户端连接至一个权威服务器，服务器将游戏状态与每一个客户端共享，客户端之间通过也服务器进行通信。

当出现网络不稳定，导致的输入丢失时，各个客户端会状态可能不同，但一切以权威服务器上的状态为准。

所以说，**服务器**是游戏真正运行的地方，**客户端**各种控制他们在**服务器**上拥有的远程Pawn。

具体说：**客户端**通过**本地Pawn**发送**远程程序调用**(RPC)到**服务端**以在游戏中进行操作，**服务端**复制游戏状态信息到每一个客户端(包括RPC发送端)，客户端使用复制的信息，**近似的模拟**服务端实际上正在发生的情况。

总结：客户端将操作发送到服务端，服务端执行，将状态复制到各个客户端。

> 网络带宽: 单位时间内可以传输的数据

### 问题一：如果说通过RPC像服务端发送操作，例如移动，那么当下一次RPC丢失了，角色是会进行移动预测吗？也就是说连续的状态在离散的RPC下是怎么做的？

### 问题二：如果说本地的操作

### 网络模式

1. 单机，被视为服务器，但不接受客户端连接，可以运行客户端和服务端逻辑
2. 专用服务器，没有本地玩家的服务器，只接收客户端连接，放弃图形、声音和输入等面向玩家的功能
3. 监听服务器，有一个本地玩家的服务器，可以接收客户端连接，可以运行客户端和服务端逻辑
4. 客户端，连接到远程服务器的客户端，客户端不运行服务端逻辑

### Actor网络复制规则

1. 属性变化时复制
2. 按照``AActor::NetUpdateFrequency``设置的频率复制

对于不连贯的移动，会做移动推算
1. 对于``ROLE_AutonomousProxy``来自玩家的模拟代理，会有更多的信息做推算，相比于``ROLE_SimulatedProxy``

### Remote Role & Local Role

1. ``Local Role``，用于区分客户端上的控制身份
2. ``Remote Role``，用于区分服务端上的控制身份

> 待补充



