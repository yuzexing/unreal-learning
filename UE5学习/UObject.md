# UObject

### UObject的功能

1. 自动属性初始化
2. 自动更新引用
3. 序列化
4. 更新属性值
5. 编辑器可见
6. 运行时类型信息和类型转换

### 自动属性初始化

在**调用构造函数之前**，UObject在初始化时归零，对所有成员变量归零，包括原生成员、UPROPERTY修饰的成员。

### 自动引用更新

当AActor 或者 AActorComponent 被销毁时，会自动将其在反射系统可见的引用清空，比如UPROPERTY指针、虚幻引擎容器类中存储的指针，如TArray。

如果是反射系统不可见的指针，则不会被清空，也不会影响垃圾回收。如果不使用UPROPEROTY指针，最好使用弱引用指针代替TWeakObjectPtr代替

### 序列化

UObject中所有UPROPERTY的成员都会参与序列化(瞬时值不会被序列化）

### 更新属性值

当UClass的CDO属性更改时，对该类的其他实例进行属性更新（默认值）

### 编辑器可见

UObject中的UPROPERTY对编辑器可见，可以被编辑器修改；对蓝图可见

### 运行时类型信息和类型转换

1. Super调用父类函数
2. Cast,更安全高效的类型转换

### 垃圾回收

从根集出发，查询所有被引用的对象，回收没有被引用的对象

> 可以调整垃圾回收的检测频率，避免一次回收过多的对象从而导致卡顿

### 网络复制

UProperty可以标记需要网络复制的属性

UFunction可以标记为RPC

